{% extends 'employer/base.html' %}
{% load static %}
{% block content %}
<!-- Page Title Start -->
<section class="page-title title-bg5">
	<div class="d-table">
		<div class="d-table-cell">
			<h2>Edit Job</h2>
			<ul>
				<li>
					<a href="{% url 'employer_index' %}">Home</a>
				</li>
				<li>Edit Job</li>
			</ul>
		</div>
	</div>
	<div class="lines">
		<div class="line"></div>
		<div class="line"></div>
		<div class="line"></div>
	</div>
</section>
<!-- Page Title End -->

<!-- Post Job Section Start -->
<section class="post-job-section pt-100 pb-70">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-lg-8">
				<div class="user-content">
					<div class="top text-center mb-4">
						<h2>Edit Job Details</h2>
						<p>Update the information for your job posting.</p>
					</div>

					<form method="post" class="card p-4 shadow-sm border-0">
						{% csrf_token %}

						{% if form.non_field_errors %}
						<div class="alert alert-danger">{{ form.non_field_errors }}</div>
						{% endif %}

						<div class="row">
							<div class="col-md-12 mb-3">
								<label class="form-label fw-bold">Job Title</label>
								{{ form.job_title }}
								<div class="text-danger small">{{ form.job_title.errors }}</div>
							</div>

							<div class="col-md-12 mb-3">
								<label class="form-label fw-bold">Job Description</label>
								{{ form.job_description }}
								<div class="text-danger small">{{ form.job_description.errors }}</div>
							</div>

							<div class="col-md-12 mb-3">
								<label class="form-label fw-bold">Key Responsibilities & Requirements</label>
								{{ form.requirements }}
								<div class="text-danger small">{{ form.requirements.errors }}</div>
							</div>

							<div class="col-md-6 mb-3">
								<label class="form-label fw-bold d-block">Job Type</label>
								{{ form.job_type }}
								<div class="text-danger small">{{ form.job_type.errors }}</div>
							</div>

							<div class="col-md-6 mb-3">
								<label class="form-label fw-bold d-block">Part-Time Category</label>
								{{ form.part_time_category }}
								<div class="text-danger small">{{ form.part_time_category.errors }}</div>
							</div>

							<div class="col-md-6 mb-3">
								<label class="form-label fw-bold">Shift Timing</label>
								{{ form.shift_timing }}
								<div class="text-danger small">{{ form.shift_timing.errors }}</div>
							</div>

							<div class="col-md-6 mb-3">
								<label class="form-label fw-bold">Working Days</label>
								{{ form.working_days }}
								<small class="text-muted d-block mt-1">No. of days they can work per week.</small>
								<div class="text-danger small">{{ form.working_days.errors }}</div>
							</div>

							<div class="col-md-6 mb-3">
							<label class="form-label fw-bold">Hourly Pay (â‚¹/hour)</label>
							{{ form.hourly_pay }}
							<small class="text-muted d-block mt-1">Optional: Specify the hourly rate</small>
							<div class="text-danger small">{{ form.hourly_pay.errors }}</div>
						</div>

						<div class="col-md-6 mb-3">
								{{ form.salary_range }}
								<div class="text-danger small">{{ form.salary_range.errors }}</div>
							</div>

							<div class="col-md-6 mb-3" id="location-container">
								<label class="form-label fw-bold">Location</label>
								{{ form.location }}
								<div class="text-danger small">{{ form.location.errors }}</div>
							</div>

							<div class="col-md-6 mb-3">
								<label class="form-label fw-bold">Application Deadline</label>
								{{ form.expiry_date }}
								<div class="text-danger small">{{ form.expiry_date.errors }}</div>
							</div>
						</div>

						<div class="text-center mt-4">
							<a href="{% url 'viewjobs' %}" class="btn btn-secondary me-2">Cancel</a>
							<button type="submit" class="btn btn-primary">Update Job</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</section>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		const jobTypeSelect = document.getElementById('id_job_type');
		const locationContainer = document.getElementById('location-container');
		const locationInput = document.querySelector('#location-container input');

		function toggleLocation() {
			if (jobTypeSelect.value === 'online') {
				locationContainer.style.display = 'none';
				if (locationInput && !locationInput.value) locationInput.value = '';
			} else {
				locationContainer.style.display = 'block';
			}
		}

		if (jobTypeSelect) {
			jobTypeSelect.addEventListener('change', toggleLocation);
			// Run on load to set initial state
			toggleLocation();
		}
	});
</script>
<!-- Post Job Section End -->

{% endblock %}