{% extends 'student/base.html' %}
{% load static %}

{% block content %}
<style>
    .job-header-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        padding: 40px;
        margin-bottom: 30px;
        position: relative;
        overflow: hidden;
    }

    .job-header-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 6px;
        height: 100%;
        background: #0d6efd;
    }

    .company-logo-large {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .job-meta-item {
        display: flex;
        align-items: center;
        margin-right: 25px;
        margin-bottom: 10px;
        color: #6c757d;
        font-size: 0.95rem;
    }

    .job-meta-item i {
        font-size: 1.2rem;
        color: #0d6efd;
        margin-right: 8px;
    }

    .job-content-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        padding: 40px;
        height: 100%;
    }

    .sidebar-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        padding: 25px;
        margin-bottom: 25px;
    }

    .btn-apply {
        padding: 15px;
        border-radius: 10px;
        font-weight: 600;
        font-size: 1.1rem;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
    }

    .btn-apply:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(25, 135, 84, 0.3);
    }

    .badge-soft {
        padding: 8px 15px;
        border-radius: 8px;
        font-weight: 500;
        font-size: 0.85rem;
    }

    .section-title {
        font-weight: 700;
        color: #212529;
        margin-bottom: 20px;
        padding-bottom: 10px;
    }
</style>
<section class="mb-5">
    <h5 class="section-title">Job Description</h5>
    <div class="text-muted" style="line-height: 1.8;">
        {{ job.job_description|linebreaks }}
    </div>
</section>

<section class="mb-5">
    <h5 class="section-title">Key Responsibilities & Requirements</h5>
    <div class="text-muted">
        <!-- Assuming description might contain formatted text or lists, if not, static text -->
        <p>No specific responsibilities listed. Please refer to the job description above.</p>
    </div>
</section>
</div>
</div>

<!-- Sidebar Info -->
<div class="col-lg-4">
    <!-- Mobile Apply Button (Visible only on smaller screens) -->
    <div class="d-lg-none mb-4">
        {% if has_applied %}
        <button class="btn btn-secondary btn-apply w-100 shadow-sm" disabled>
            <i class="bi bi-check-circle-fill me-2"></i> Applied
        </button>
        {% else %}
        <a href="{% url 'apply_job' job.id %}" class="btn btn-success btn-apply w-100 shadow-sm">
            Apply Now <i class="bi bi-arrow-right ms-2"></i>
        </a>
        {% endif %}
    </div>

    <div class="sidebar-card">
        <h5 class="fw-bold mb-4">Job Overview</h5>
        <ul class="list-unstyled">
            <li class="mb-3 d-flex justify-content-between align-items-center border-bottom pb-2">
                <span class="text-muted"><i class="bi bi-calendar-check me-2"></i>Posted Date</span>
                <span class="fw-semibold">{{ job.posted_date|date:"M d, Y" }}</span>
            </li>
            <li class="mb-3 d-flex justify-content-between align-items-center border-bottom pb-2">
                <span class="text-muted"><i class="bi bi-hourglass-split me-2"></i>Deadline</span>
                <span class="fw-semibold text-danger">{{ job.expiry_date|date:"M d, Y" }}</span>
            </li>
            <li class="mb-3 d-flex justify-content-between align-items-center">
                <span class="text-muted"><i class="bi bi-people me-2"></i>Vacancies</span>
                <span class="fw-semibold">{{ job.vacancies|default:"N/A" }}</span>
            </li>
        </ul>
    </div>

    <div class="sidebar-card text-center">
        <h6 class="fw-bold mb-3">About the Company</h6>
        {% if job.employer.logo %}
        <img src="{{ job.employer.logo.url }}" alt="Logo" class="rounded mb-3"
            style="width: 60px; height: 60px; object-fit: cover;">
        {% endif %}
        <h5 class="fw-bold">{{ job.employer.company_name }}</h5>
        {% if job.employer.website %}
        <a href="{{ job.employer.website }}" target="_blank" class="btn btn-outline-primary btn-sm rounded-pill mt-2">
            <i class="bi bi-link-45deg me-1"></i> Visit Website
        </a>
        {% endif %}
    </div>
</div>
</div>
</div>
{% endblock %}